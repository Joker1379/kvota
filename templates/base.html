<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">​
  <title>Kvota-S</title>
</head>
<body>
<div class="container">
    <header class="kvota-header">
        <div class="row flex-nowrap justify-content-between align-items-center">
          <div class="col-4 pt-3">
            <!-- Add Logo Here -->
          </div>
          <div class="col-4 text-center">
            <a href="/"><font size = 14>Kvota-S</font></a>
          </div>
          <div class="col-4 d-flex justify-content-end align-items-center pt-3">
            {% if user.is_authenticated %}
              <a class="btn btn-outline-primary" href="/profile/{{ user.id }}">Профиль</a>
            {% else %}
              <a class="btn btn-outline-primary" data-toggle="modal" data-target="#login_modal">Вход</a>
              &nbsp
              <a class="btn btn-outline-secondary" data-toggle="modal" data-target="#registration_modal">Регистрация</a>
            {% endif %} 
          </div>
        </div>
    </header>
    <div class="nav-scroller">
        <font size = 5>
        <nav class="nav d-flex justify-content-around">
          <a class="p-2 text-muted" href="/">Вакансии</a>
          <a class="p-2 text-muted" href="/cources/">Курсы</a>
          <a class="p-2 text-muted" href="#">Справка</a>
        </nav>
        </font>
    </div>
    <hr>
    <div>{% block content%}{% endblock content %}</div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

<script>
  $(document).on("click", ".open-AddItem", function () {
    var item = $(this).data('id');
    $(".modal-footer #category").val(item);
  });
  $(document).on("click", ".open-VacancyInfo", function () {
    var data = $(this).data('id').split("!");
    $(".modal-content #name").html(data[0]);
    $(".modal-content #date").html(data[1]);
    $(".modal-content #description").html(data[2]);
    $(".modal-content #education").html(data[3]);
    $(".modal-content #mode").html(data[4]);
    $(".modal-content #city").html(data[5]);
    $(".modal-content #street").html(data[6]);
    $(".modal-content #house").html(data[7]);
    $(".modal-content #email").html(data[8]);
    $(".modal-content #phone").html(data[9]);
    $(".modal-content #v_username").html(data[10]);
    document.getElementById("v_username").setAttribute("href", "/profile/"+data[11]);
  });
  $(document).on("click", ".open-VacancyAction", function () {
    var action = $(this).data('id');
    if (action == "add_vacancy"){
      $('#v_form [name=name]').val('');
      $('#v_form [name=description]').val('');
      $('#v_form [name=education]').val('-');
      $('#v_form [name=mode]').val('-');
      $('#v_form [name=city]').val('');
      $('#v_form [name=street]').val('');
      $('#v_form [name=house]').val('');
      $('#v_form [name=email]').val('');
      $('#v_form [name=phone]').val('');
      $(".modal-footer #v_action").val(action);
    } else {
      data = action.split('!');
      $('#v_form [name=name]').val(data[0]);
      $('#v_form [name=description]').val(data[1]);
      $('#v_form [name=education]').val(data[2]);
      $('#v_form [name=mode]').val(data[3]);
      $('#v_form [name=city]').val(data[4]);
      $('#v_form [name=street]').val(data[5]);
      $('#v_form [name=house]').val(data[6]);
      $('#v_form [name=email]').val(data[7]);
      $('#v_form [name=phone]').val(data[8]);
      $(".modal-footer #v_action").val("red_vacancy!"+data[9]);
    }
  });
  // Пример того, как можно назначить значение атрибута:
  // document.getElementById("delv").setAttribute("href", "/vacancy_del/"+data[10]);
</script>
</body>

<div class="modal fade" id="registration_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Регистрация</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST">
        {% csrf_token %}
        <div class="modal-body">
          <center>
          <table>
            {{ registration }}
          </table>
        </center>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
          <button type="submit" class="btn btn-primary" name ="action" value="registration">Продолжить</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Вход</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST">
        {% csrf_token %}
        <div class="modal-body">
          <center>
          <table>
            {{ login }}
          </table>
        </center>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
          <button type="submit" class="btn btn-primary" name = "action" value = "login">Продолжить</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="profile_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Информация Профиля</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST">
        {% csrf_token %}
        <div class="modal-body">
          <center>
          <table>
            {{ profile }}
          </table>
        </center>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
          <button type="submit" class="btn btn-primary" name = "action" value = "info">Принять</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="add_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Добавить</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST">
        {% csrf_token %}
        <div class="modal-body">
        <center>
          <input class="form-control" type="text" placeholder="Введите значение..." name="input">
        </center>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
          <button type="submit" class="btn btn-primary" id="category" name="action" value="category">Принять</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="vacancy_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="v_modal_litle">Информация о Вакансии</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST" id="v_form">
        {% csrf_token %}
        <div class="modal-body">
        <center>
          <table>
            {{ vform }}
          </table>
        </center>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
          <button type="submit" class="btn btn-primary" id="v_action" name="action">Принять</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="info_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="container">
        <div class="row">
          <div class="col-md-8 py-5">
            <center>
              <h2><label id="name"></label></h2>
              <label class="badge badge-primary badge-pill" id="date"></label><br><br>
              <a id="v_username" href=""></a>
            </center>
          </div>
          <div class="col">
            <!--Add image here-->
            <br>
            <svg class="bd-placeholder-img" width="200" height="200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Thumbnail"><title>Placeholder</title><rect width="100%" height="100%" fill="#55595c"/></svg>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <br>
            <center>
              <label id="description"></label>
            </center>
            <br>
          </div>
        </div>
        {% for i in vlabels %}
        <div class="row justify-content-center">
          <div class="col-md-6"><center><strong>{{i}}:</strong></center></div>
          <div class="col-md-6">
            <center><p>
              {% if i == "Требуемое образование" %}
                <label id="education"></label>
              {% elif i == "Режим работы" %}
                <label id="mode"></label>
              {% elif i == "Город" %}
                <label id="city"></label>
              {% elif i == "Улица" %}
                <label id="street"></label>
              {% elif i == "Строение / Расположение офиса" %}
                <label id="house"></label>
              {% elif i == "Email" %}
                <label id="email"></label>
              {% elif i == "Контактный телефон" %}
                <label id="phone"></label>
              {% endif %}
            </p></center>
          </div>
        </div>
        {% endfor %}
        <br>
        <div class="row justify-content-center">
            <button class="btn btn-primary" data-dismiss="modal">Закрыть</button>
        </div>
        <br>
      </div>
    </div>
  </div>
</div>

</html>